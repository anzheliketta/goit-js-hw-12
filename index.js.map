{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_KEY = \"46773750-2567d69edc75d4703fc28c418\";\r\nconst BASE_URL = 'https://pixabay.com/api/';\r\n\r\n\r\n\r\n\r\n  export const fetchImages = async (query, page = 1, per_page = 15) => {\r\n    try {\r\n        const response = await axios.get(BASE_URL, {\r\n            params: {\r\n                key: API_KEY,\r\n                q: query,\r\n                image_type: 'photo',\r\n                orientation: 'horizontal',\r\n                safesearch: true,\r\n                per_page,\r\n                page\r\n            }\r\n        });\r\n        return response.data;\r\n    } catch (error) {\r\n        console.log(\"Error fetching images:\", error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n\r\n","import SimpleLightbox from 'simplelightbox';\r\nimport 'simplelightbox/dist/simple-lightbox.min.css';\r\n\r\nlet lightbox;\r\n\r\nexport function renderImages(images) {\r\n  const gallery = document.querySelector('.gallery');\r\n  const markup = images\r\n    .map(\r\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\r\n        `<li>\r\n          <a href=\"${largeImageURL}\">\r\n            <div class=\"image-info\">\r\n              <img src=\"${webformatURL}\" alt=\"${tags}\" width=\"300\" height=\"200\">\r\n              <p><strong>Likes:</strong> ${likes}</p>\r\n              <p><strong>Views:</strong> ${views}</p>\r\n              <p><strong>Comments:</strong> ${comments}</p>\r\n              <p><strong>Downloads:</strong> ${downloads}</p>\r\n            </div>\r\n          </a>\r\n        </li>`\r\n    )\r\n    .join('');\r\n\r\n  gallery.insertAdjacentHTML('beforeend', markup);\r\n\r\n  if (!lightbox) {\r\n    lightbox = new SimpleLightbox('.gallery a');\r\n  } else {\r\n    lightbox.refresh();\r\n  }\r\n}\r\n\r\n\r\n","import { fetchImages } from './js/pixabay-api';\r\nimport { renderImages } from './js/render-functions';\r\nimport iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\n\r\nconst form = document.querySelector(\".search-form\");\r\nconst loader = document.querySelector(\".loader\");\r\nconst gallery = document.querySelector(\".gallery\");\r\nconst loadBtn = document.querySelector(\".btn-load\");\r\n\r\nlet query = '';\r\nlet page = 1;\r\nlet per_page = 15;\r\n\r\nform.addEventListener('submit', async (event) => {\r\n    event.preventDefault();\r\n     query = event.currentTarget.elements.searchQuery.value.trim();\r\n\r\n    if(!query) {\r\n        iziToast.error({ \r\n            title: 'Error', message: 'Будь ласка, введіть пошуковий запит' });\r\n            return;\r\n    }\r\n     page = 1;\r\n     gallery.innerHTML = '';\r\n     loadBtn.style.display = 'none';\r\n     fetchRenderImages();\r\n});\r\nconst fetchRenderImages = async () => {\r\n    try {\r\n        loader.style.display ='block';\r\n        const data = await fetchImages(query, page, per_page);\r\n        loader.style.display = 'none';\r\n\r\n        if(data.hits.length === 0) {\r\n            iziToast.info({\r\n                message: 'На жаль, немає зображень, які відповідають вашому пошуковому запиту. Будь ласка, спробуйте ще раз!'\r\n            });\r\n            loadBtn.style.display = 'none';\r\n            return;\r\n        }\r\n        renderImages(data.hits);\r\n        page += 1;\r\n\r\n        if(data.hits.length < per_page || page > Math.ceil(data.totalHits / per_page)) {\r\n            loadBtn.style.display = 'none';\r\n            iziToast.info({ message: 'Вибачте, але ви досягли кінця результатів пошуку'})\r\n        } else {\r\n            loadBtn.style.display = 'block';\r\n        }\r\n    } catch (error) {\r\n        loadBtn.style.display = 'none';\r\n        iziToast.error({title: 'Error', message: error.message});\r\n    }\r\n};\r\n\r\nloadBtn.addEventListener('click', async () => {\r\n    await fetchRenderImages();\r\n    const galleryRect = document.querySelector('.gallery').lastElementChild.getBoundingClientRect();\r\n    window.scrollBy({\r\n        top: galleryRect.height * 2,\r\n        behavior: 'smooth'\r\n    });\r\n});"],"names":["API_KEY","BASE_URL","fetchImages","query","page","per_page","axios","error","lightbox","renderImages","images","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","form","loader","loadBtn","event","iziToast","fetchRenderImages","data","galleryRect"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAKFC,EAAc,MAAOC,EAAOC,EAAO,EAAGC,EAAW,KAAO,CACnE,GAAI,CAYA,OAXiB,MAAMC,EAAM,IAAIL,EAAU,CACvC,OAAQ,CACJ,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAAE,EACA,KAAAD,CACH,CACb,CAAS,GACe,IACnB,OAAQG,EAAO,CACZ,cAAQ,IAAI,yBAA0BA,CAAK,EACrCA,CACT,CACL,ECvBA,IAAIC,EAEG,SAASC,EAAaC,EAAQ,CACnC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAASF,EACZ,IACC,CAAC,CAAE,aAAAG,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IACvE;AAAA,qBACaL,CAAa;AAAA;AAAA,0BAERD,CAAY,UAAUE,CAAI;AAAA,2CACTC,CAAK;AAAA,2CACLC,CAAK;AAAA,8CACFC,CAAQ;AAAA,+CACPC,CAAS;AAAA;AAAA;AAAA,cAInD,EACA,KAAK,EAAE,EAEVR,EAAQ,mBAAmB,YAAaC,CAAM,EAEzCJ,EAGHA,EAAS,QAAO,EAFhBA,EAAW,IAAIY,EAAe,YAAY,CAI9C,CC1BA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAS,SAAS,cAAc,SAAS,EACzCX,EAAU,SAAS,cAAc,UAAU,EAC3CY,EAAU,SAAS,cAAc,WAAW,EAElD,IAAIpB,EAAQ,GACRC,EAAO,EACPC,EAAW,GAEfgB,EAAK,iBAAiB,SAAU,MAAOG,GAAU,CAI7C,GAHAA,EAAM,eAAc,EACnBrB,EAAQqB,EAAM,cAAc,SAAS,YAAY,MAAM,OAErD,CAACrB,EAAO,CACPsB,EAAS,MAAM,CACX,MAAO,QAAS,QAAS,qCAAuC,CAAA,EAChE,MACP,CACArB,EAAO,EACPO,EAAQ,UAAY,GACpBY,EAAQ,MAAM,QAAU,OACxBG,GACL,CAAC,EACD,MAAMA,EAAoB,SAAY,CAClC,GAAI,CACAJ,EAAO,MAAM,QAAS,QACtB,MAAMK,EAAO,MAAMzB,EAAYC,EAAOC,EAAMC,CAAQ,EAGpD,GAFAiB,EAAO,MAAM,QAAU,OAEpBK,EAAK,KAAK,SAAW,EAAG,CACvBF,EAAS,KAAK,CACV,QAAS,oGACzB,CAAa,EACDF,EAAQ,MAAM,QAAU,OACxB,MACH,CACDd,EAAakB,EAAK,IAAI,EACtBvB,GAAQ,EAELuB,EAAK,KAAK,OAAStB,GAAYD,EAAO,KAAK,KAAKuB,EAAK,UAAYtB,CAAQ,GACxEkB,EAAQ,MAAM,QAAU,OACxBE,EAAS,KAAK,CAAE,QAAS,kDAAkD,CAAC,GAE5EF,EAAQ,MAAM,QAAU,OAE/B,OAAQhB,EAAO,CACZgB,EAAQ,MAAM,QAAU,OACxBE,EAAS,MAAM,CAAC,MAAO,QAAS,QAASlB,EAAM,OAAO,CAAC,CAC1D,CACL,EAEAgB,EAAQ,iBAAiB,QAAS,SAAY,CAC1C,MAAMG,EAAiB,EACvB,MAAME,EAAc,SAAS,cAAc,UAAU,EAAE,iBAAiB,wBACxE,OAAO,SAAS,CACZ,IAAKA,EAAY,OAAS,EAC1B,SAAU,QAClB,CAAK,CACL,CAAC"}